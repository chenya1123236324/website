(function(){function e(e){if(r)e(r);else{var t=new XMLHttpRequest;t.open("GET",E,!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response);r=t instanceof Array?t:t.posts,e(r)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}function t(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}function n(e){var n="";n=e.length?e.map(function(e){return t(T,{title:e.title,path:(o.BLOG.ROOT+"/"+e.path).replace(/\/{2,}/g,"/"),date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',w.innerHTML=n}function s(e,t){return t.lastIndex=0,t.test(e)}function i(e,t){return s(e.title,t)||e.tags.some(function(e){return s(e.name,t)})||s(e.text,t)}function a(t){var s=this.value.trim();if(s){var a=new RegExp(s.replace(/[ ]/g,"|"),"gmi");e(function(e){var t=e.filter(function(e){return i(e,a)});n(t),G.show()}),t.preventDefault()}}var r,o=window||this,c=o.BLOG.even,l=o.BLOG.$,u=l("#search"),d=l("#header"),h=l("#search-wrap"),f=l("#themeToggle"),g=l("#menu-toggle"),p=l("#menuShare"),L=l("#headerTitle"),v=l("#key"),m=l("#back"),O=l("#search-panel"),w=l("#search-result"),T=l("#search-tpl").innerHTML,E=(o.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),k=o.BLOG.noop,x=l("html"),G={show:function(){o.innerWidth<760?x.classList.add("lock-size"):k,O.classList.add("in")},hide:function(){o.innerWidth<760?x.classList.remove("lock-size"):k,O.classList.remove("in")}};u.addEventListener(c,function(){d.classList.toggle("searchOpen"),h.classList.toggle("in"),L.classList.toggle("hide"),g.classList.toggle("hide"),f.classList.toggle("hide"),p.classList.toggle("hide"),v.value="",h.classList.contains("in")?v.focus():v.blur()}),m.addEventListener(c,function(){h.classList.remove("in"),G.hide()}),document.addEventListener(c,function(e){"key"!==e.target.id&&"click"===c&&G.hide()}),v.addEventListener("input",a),v.addEventListener(c,a)}).call(this);